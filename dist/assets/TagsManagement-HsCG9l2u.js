import{u as b,r,j as e}from"./index-ByKhu-yM.js";import{a as S,P as T,e as C,d as w,b as k}from"./api-B3hH5qD8.js";import{T as z,b as D,S as E,a as A}from"./trash-2-7MuK8gDU.js";import{C as P}from"./circle-x-B3FAp3Rb.js";function L(){const x=b(),[m,f]=r.useState([]),[j,u]=r.useState(!0),[h,a]=r.useState(null),[c,i]=r.useState(null),[g,o]=r.useState(!1),[t,n]=r.useState({name:"",color:"#4a9eff"});r.useEffect(()=>{d()},[]);const d=async()=>{try{u(!0),a(null);const s=await S("/tags");f(s)}catch(s){a(s.message)}finally{u(!1)}},p=async s=>{if(s.preventDefault(),!t.name.trim()){a("اسم الوسم مطلوب");return}try{a(null),await w("/tags",t),n({name:"",color:"#4a9eff"}),o(!1),d()}catch(l){a(l.message)}},v=async s=>{if(s.preventDefault(),!t.name.trim()){a("اسم الوسم مطلوب");return}try{a(null),await C(`/tags/${c.id}`,t),i(null),n({name:"",color:"#4a9eff"}),d()}catch(l){a(l.message)}},y=async s=>{if(window.confirm("هل أنت متأكد من حذف هذا الوسم؟"))try{a(null),await k(`/tags/${s}`),d()}catch(l){a(l.message)}},N=s=>{i(s),n({name:s.name,color:s.color}),o(!1)};return j?e.jsx("div",{style:{padding:"20px",textAlign:"center"},children:"جاري التحميل..."}):e.jsxs("div",{className:"tags-management-page",children:[e.jsxs("header",{className:"page-header",children:[e.jsxs("h1",{children:[e.jsx(z,{size:28,className:"header-icon"}),e.jsx("span",{children:"إدارة الوسوم"})]}),e.jsx("button",{className:"back-btn",onClick:()=>x("/"),children:"العودة للعرض"})]}),h&&e.jsxs("div",{className:"error-message",children:[e.jsx(P,{size:20}),h]}),e.jsxs("div",{className:"tags-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsxs("h2",{children:["الوسوم (",m.length,")"]}),e.jsxs("button",{className:"add-tag-btn",onClick:()=>{o(!0),i(null),n({name:"",color:"#4a9eff"})},children:[e.jsx(T,{size:18}),"إضافة وسم جديد"]})]}),(g||c)&&e.jsxs("form",{onSubmit:c?v:p,className:"tag-form",children:[e.jsx("input",{type:"text",placeholder:"اسم الوسم",value:t.name,onChange:s=>n({...t,name:s.target.value}),required:!0}),e.jsx("input",{type:"color",value:t.color,onChange:s=>n({...t,color:s.target.value})}),e.jsxs("div",{className:"form-actions",children:[e.jsxs("button",{type:"submit",children:[e.jsx(D,{size:16}),c?"حفظ التعديلات":"إضافة"]}),e.jsx("button",{type:"button",onClick:()=>{o(!1),i(null),n({name:"",color:"#4a9eff"})},children:"إلغاء"})]})]}),e.jsx("div",{className:"tags-grid",children:m.map(s=>e.jsxs("div",{className:"tag-card",children:[e.jsx("div",{className:"tag-color",style:{backgroundColor:s.color}}),e.jsxs("div",{className:"tag-info",children:[e.jsx("h3",{children:s.name}),e.jsx("p",{children:s.color})]}),e.jsxs("div",{className:"tag-actions",children:[e.jsx("button",{onClick:()=>N(s),title:"تعديل",children:e.jsx(E,{size:16})}),e.jsx("button",{onClick:()=>y(s.id),title:"حذف",children:e.jsx(A,{size:16})})]})]},s.id))}),m.length===0&&!g&&e.jsx("div",{style:{padding:"40px",textAlign:"center",color:"var(--text-secondary)"},children:"لا توجد وسوم. أضف وسم جديد للبدء."})]})]})}export{L as default};
