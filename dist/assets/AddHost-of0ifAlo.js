import{u as g,r,j as e}from"./index-ByKhu-yM.js";import{P as f,A as j,d as v}from"./api-B3hH5qD8.js";import{C as b}from"./circle-plus-Bg35JaGF.js";import{A as N}from"./arrow-right-D-hv9lOI.js";import{C as y}from"./circle-x-B3FAp3Rb.js";function F({theme:u}){const i=g(),[o,n]=r.useState(null),[C,h]=r.useState([]),[S,c]=r.useState(!0),[s,l]=r.useState({name:"",ip:"",description:"",url:"",tagIds:[]}),[d,m]=r.useState(!1);r.useEffect(()=>{(async()=>{try{c(!0);const t=await fetch(`${j}/tags`);if(t.ok){const x=await t.json();h(x)}}catch(t){console.error("خطأ في تحميل الوسوم:",t)}finally{c(!1)}})()},[]);const p=async a=>{if(a.preventDefault(),!s.name.trim()||!s.ip.trim()){n("اسم المضيف وعنوان IP مطلوبان");return}try{n(null),m(!0),await v("/hosts",s),i("/")}catch(t){n(t.message)}finally{m(!1)}};return e.jsxs("div",{className:"add-host-page",children:[e.jsxs("header",{className:"page-header",children:[e.jsxs("h1",{children:[u==="light"?e.jsx(b,{size:28,className:"header-icon"}):e.jsx(f,{size:28,className:"header-icon"}),e.jsx("span",{children:"إضافة مضيف جديد"})]}),e.jsxs("button",{className:"back-btn",onClick:()=>i("/"),children:[e.jsx(N,{size:18,style:{marginLeft:"8px"}}),"العودة للعرض"]})]}),o&&e.jsxs("div",{className:"error-message",children:[e.jsx(y,{size:20}),o]}),e.jsxs("form",{onSubmit:p,className:"add-host-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"name",children:"اسم المضيف *"}),e.jsx("input",{type:"text",id:"name",value:s.name,onChange:a=>l({...s,name:a.target.value}),required:!0,placeholder:"مثال: Server-01"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"ip",children:"عنوان IP *"}),e.jsx("input",{type:"text",id:"ip",value:s.ip,onChange:a=>l({...s,ip:a.target.value}),required:!0,placeholder:"مثال: 192.168.1.100"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"description",children:"الوصف"}),e.jsx("textarea",{id:"description",value:s.description,onChange:a=>l({...s,description:a.target.value}),placeholder:"وصف اختياري للمضيف",rows:"3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"url",children:"URL (اختياري)"}),e.jsx("input",{type:"url",id:"url",value:s.url,onChange:a=>l({...s,url:a.target.value}),placeholder:"https://example.com"})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"submit",className:"submit-btn",disabled:d,children:d?"جاري الإضافة...":"إضافة المضيف"}),e.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>i("/"),children:"إلغاء"})]})]})]})}export{F as default};
