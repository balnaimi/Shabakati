import{c as w,u as b,r as i,j as s}from"./index-ByKhu-yM.js";import{P as z,d as u}from"./api-B3hH5qD8.js";import{S as f}from"./search-D19P96sh.js";import{A as C}from"./arrow-right-D-hv9lOI.js";import{C as P}from"./circle-plus-Bg35JaGF.js";const A=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],N=w("clock",A);function F({theme:k}){const m=b(),[o,y]=i.useState("192.168.30.1-254"),[r,h]=i.useState(!1),[p,c]=i.useState(null),[l,x]=i.useState([]),[a,g]=i.useState(new Set),S=async()=>{if(!o.trim()){c("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù†Ø·Ø§Ù‚ Ø§Ù„Ø´Ø¨ÙƒØ©");return}try{c(null),h(!0),x([]),g(new Set);const e=await u("/network/scan",{networkRange:o.trim(),timeout:2});x(e.hosts||[])}catch(e){c(e.message)}finally{h(!1)}},j=e=>{const t=new Set(a);t.has(e)?t.delete(e):t.add(e),g(t)},v=async()=>{if(a.size===0){c("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø¶ÙŠÙ ÙˆØ§Ø­Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„");return}try{c(null);const e=Array.from(a),d=l.filter(n=>e.includes(n.ip)).map(async n=>{await u("/hosts",{name:n.hostname||`Host ${n.ip.split(".").pop()}`,ip:n.ip,description:`ØªÙ… Ø§ÙƒØªØ´Ø§ÙÙ‡ Ù…Ù† Ù…Ø³Ø­ Ø§Ù„Ø´Ø¨ÙƒØ©${n.port?` (Port: ${n.port})`:""}`,url:"",status:"online"})});await Promise.all(d),m("/")}catch(e){c(e.message)}};return s.jsxs("div",{className:"network-scan-page",children:[s.jsxs("header",{className:"page-header",children:[s.jsxs("h1",{children:[s.jsx(f,{size:28,className:"header-icon"}),s.jsx("span",{children:"Ù…Ø³Ø­ Ø§Ù„Ø´Ø¨ÙƒØ©"})]}),s.jsxs("button",{className:"back-btn",onClick:()=>m("/"),children:[s.jsx(C,{size:18,style:{marginLeft:"8px"}}),"Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø¹Ø±Ø¶"]})]}),s.jsxs("section",{className:"scan-section",children:[s.jsxs("div",{className:"scan-form",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"networkRange",children:"Ù†Ø·Ø§Ù‚ Ø§Ù„Ø´Ø¨ÙƒØ©:"}),s.jsx("input",{type:"text",id:"networkRange",value:o,onChange:e=>y(e.target.value),placeholder:"Ù…Ø«Ø§Ù„: 192.168.30.1-254 Ø£Ùˆ 192.168.30.0/24",disabled:r})]}),s.jsx("button",{className:"scan-btn",onClick:S,disabled:r,children:r?s.jsxs(s.Fragment,{children:[s.jsx(N,{size:18,style:{marginLeft:"8px"}}),"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø³Ø­..."]}):s.jsxs(s.Fragment,{children:[s.jsx(f,{size:18,style:{marginLeft:"8px"}}),"Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø³Ø­"]})})]}),p&&s.jsxs("div",{className:"error-message",children:["âš ï¸ ",p]}),r&&s.jsx("div",{className:"scanning-indicator",children:s.jsxs("p",{children:[s.jsx(N,{size:18,style:{marginLeft:"8px",display:"inline-block",verticalAlign:"middle"}}),"Ø¬Ø§Ø±ÙŠ Ù…Ø³Ø­ Ø§Ù„Ø´Ø¨ÙƒØ©... Ù‚Ø¯ ÙŠØ³ØªØºØ±Ù‚ Ù‡Ø°Ø§ Ø¨Ø¹Ø¶ Ø§Ù„ÙˆÙ‚Øª"]})}),l.length>0&&s.jsxs("div",{className:"scanned-hosts",children:[s.jsxs("div",{className:"hosts-header",children:[s.jsxs("h2",{children:["Ø§Ù„Ù…Ø¶ÙŠÙÙŠÙ† Ø§Ù„Ù…ÙƒØªØ´ÙÙŠÙ† (",l.length,")"]}),a.size>0&&s.jsxs("button",{className:"add-selected-btn",onClick:v,children:[k==="light"?s.jsx(P,{size:18,style:{marginLeft:"8px"}}):s.jsx(z,{size:18,style:{marginLeft:"8px"}}),"Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø­Ø¯Ø¯ (",a.size,")"]})]}),s.jsx("div",{className:"hosts-grid",children:l.map((e,t)=>s.jsxs("div",{className:`host-item ${a.has(e.ip)?"selected":""}`,onClick:()=>j(e.ip),children:[s.jsx("div",{className:"host-checkbox",children:s.jsx("input",{type:"checkbox",checked:a.has(e.ip),onChange:()=>j(e.ip),onClick:d=>d.stopPropagation()})}),s.jsxs("div",{className:"host-info",children:[s.jsx("h3",{children:e.hostname||`Host ${e.ip.split(".").pop()}`}),s.jsxs("p",{className:"host-ip",children:["ğŸ“ ",e.ip]}),e.hostname&&s.jsxs("p",{className:"host-hostname",children:["ğŸ·ï¸ ",e.hostname]}),e.port&&s.jsxs("p",{className:"host-port",children:["ğŸ”Œ Port: ",e.port]})]})]},t))})]})]})]})}export{F as default};
